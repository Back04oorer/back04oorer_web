<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>数字水母 · p5.js 演示</title>
  <!-- 引入 p5.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
</head>
<body>
  <script>
    let t = 0;
    function setup() {
      createCanvas(400, 400);
      background(9);
      stroke(255, 66);  // 白色、透明度 66
      noFill();
    }

    function draw() {
      background(9);
      t += PI / 20;

      // 画 10000 个点
      for (let i = 0; i < 1e4; i++) {
        // 将一维 i 映射到 x,y
        let x = i % 200;
        let y = i / 43;

        // 计算参数
        let k = 5 * cos(x / 14) * cos(y / 30);
        let e = y / 8 - 13;
        let d = dist(k, e, 0, 0);        // mag(k,e) = sqrt(k²+e²)

        // 极坐标变换
        let q = 60 
              - 3 * sin(atan2(k, e) * e) 
              + k * (3 + 4 / d * sin(d * d - t * 2));
        let c = d / 2 + e / 99 - t / 18;

        // 计算画布坐标并画点
        let px = q * sin(c) + 200;
        let py = (q + d * 9) * cos(c) + 200;
        point(px, py);
      }
    }
  </script>
</body>
</html>
